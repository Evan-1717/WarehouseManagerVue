(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c2186"],{"499d":function(e,i,t){"use strict";t.r(i);var a=function(){var e=this,i=e._self._c;return i("div",{staticStyle:{height:"100%"}},[i("div",{staticStyle:{"margin-bottom":"5px"}},[i("el-form",{ref:"form1",attrs:{model:e.form,"label-width":"75px"}},[i("el-col",{attrs:{span:4}},[i("el-form-item",{attrs:{label:"起止日期",prop:"creater"}},[i("el-date-picker",{staticStyle:{width:"140px"},attrs:{type:"date",placeholder:"起始时间","value-format":"yyyy-MM-dd"},model:{value:e.form1.date1,callback:function(i){e.$set(e.form1,"date1",i)},expression:"form1.date1"}}),e._v("- "),i("el-date-picker",{staticStyle:{width:"140px"},attrs:{type:"date",placeholder:"结束时间","value-format":"yyyy-MM-dd"},model:{value:e.form1.date2,callback:function(i){e.$set(e.form1,"date2",i)},expression:"form1.date2"}})],1)],1),i("el-col",{attrs:{span:3}},[i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2!=e.user.roleId,expression:"user.roleId!=2"}],attrs:{label:"记录人",prop:"creater"}},[i("el-select",{staticStyle:{width:"170px"},attrs:{filterable:"",clearable:"",multiple:"","collapse-tags":"",placeholder:"请选择"},nativeOn:{keyup:function(i){return!i.type.indexOf("key")&&e._k(i.keyCode,"enter",13,i.key,"Enter")?null:e.loadPost.apply(null,arguments)}},model:{value:e.form1.creater,callback:function(i){e.$set(e.form1,"creater",i)},expression:"form1.creater"}},e._l(e.users,(function(e){return i("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1),i("el-col",{attrs:{span:3}},[i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2!=e.user.roleId,expression:"user.roleId!=2"}],attrs:{label:"角色",prop:"role"}},[i("el-select",{staticStyle:{width:"170px"},attrs:{multiple:"",clearable:"","collapse-tags":"",placeholder:"请选择"},nativeOn:{keyup:function(i){return!i.type.indexOf("key")&&e._k(i.keyCode,"enter",13,i.key,"Enter")?null:e.loadPost.apply(null,arguments)}},model:{value:e.form1.role,callback:function(i){e.$set(e.form1,"role",i)},expression:"form1.role"}},e._l(e.roles,(function(e){return i("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1),i("el-col",{attrs:{span:3}},[i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2!=e.user.roleId,expression:"user.roleId!=2"}],attrs:{label:"位置",prop:"location"}},[i("el-select",{staticStyle:{width:"170px"},attrs:{"collapse-tags":"",placeholder:"请选择",clearable:""},nativeOn:{keyup:function(i){return!i.type.indexOf("key")&&e._k(i.keyCode,"enter",13,i.key,"Enter")?null:e.loadPost.apply(null,arguments)}},model:{value:e.form1.location,callback:function(i){e.$set(e.form1,"location",i)},expression:"form1.location"}},e._l(e.locations,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),i("el-col",{attrs:{span:3}},[i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2!=e.user.roleId,expression:"user.roleId!=2"}],attrs:{label:"内容",prop:"content"}},[i("el-select",{staticStyle:{width:"170px"},attrs:{"collapse-tags":"",placeholder:"请选择",clearable:""},nativeOn:{keyup:function(i){return!i.type.indexOf("key")&&e._k(i.keyCode,"enter",13,i.key,"Enter")?null:e.loadPost.apply(null,arguments)}},model:{value:e.form1.content,callback:function(i){e.$set(e.form1,"content",i)},expression:"form1.content"}},e._l(e.contents,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),i("el-col",{attrs:{span:4}},[i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2!=e.user.roleId,expression:"user.roleId!=2"}],attrs:{label:"入职时间",prop:"creater"}},[i("el-date-picker",{staticStyle:{width:"140px"},attrs:{type:"date",placeholder:"起始时间","value-format":"yyyy-MM-dd"},model:{value:e.form1.hiredate1,callback:function(i){e.$set(e.form1,"hiredate1",i)},expression:"form1.hiredate1"}}),e._v("- "),i("el-date-picker",{staticStyle:{width:"140px"},attrs:{type:"date",placeholder:"结束时间","value-format":"yyyy-MM-dd"},model:{value:e.form1.hiredate2,callback:function(i){e.$set(e.form1,"hiredate2",i)},expression:"form1.hiredate2"}})],1)],1)],1),i("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary"},on:{click:e.loadPost}},[e._v("查询")]),i("el-button",{attrs:{type:"success"},on:{click:e.resetParam}},[e._v("重置")]),i("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary"},on:{click:e.add}},[e._v("新增")]),i("el-button",{directives:[{name:"show",rawName:"v-show",value:2!=e.user.roleId,expression:"user.roleId!=2"}],staticStyle:{"margin-left":"5px"},attrs:{type:"primary"},on:{click:function(i){return e.aiAnalyze("first")}}},[e._v("AI分析")]),i("el-button",{directives:[{name:"show",rawName:"v-show",value:2!=e.user.roleId,expression:"user.roleId!=2"}],staticStyle:{"margin-left":"5px"},attrs:{type:"primary"},on:{click:e.exportExcel}},[e._v("导出")])],1),i("el-table",{staticStyle:{overflow:"auto"},attrs:{data:e.tableData,"summary-method":e.getSummaries,"show-summary":"","header-cell-style":e.cell_style,border:"","max-height":"calc(100% - 200px)"}},[i("el-table-column",{attrs:{type:"index",label:"序号",width:"50",fixed:"left"}}),i("el-table-column",{attrs:{prop:"date",label:"日期",width:"100",fixed:"left"}}),i("el-table-column",{attrs:{prop:"creater",label:"记录人",width:"80",fixed:"left"}}),2!=e.user.roleId?i("el-table-column",{attrs:{prop:"role",label:"角色",width:"50",fixed:"left"}}):e._e(),2!=e.user.roleId?i("el-table-column",{attrs:{prop:"location",label:"位置",width:"100",fixed:"left"}}):e._e(),2!=e.user.roleId?i("el-table-column",{attrs:{prop:"content",label:"内容",width:"100",fixed:"left"}}):e._e(),2!=e.user.roleId?i("el-table-column",{attrs:{prop:"hiredate",label:"入职时间",width:"100",fixed:"left"}}):e._e(),i("el-table-column",{attrs:{prop:"fanqiedouxiaoexpend",label:"番茄抖小消耗",width:"120",sortable:!0}}),i("el-table-column",{attrs:{prop:"fanqiedouxiaorecharge",label:"番茄抖小充值",width:"120",sortable:!0}}),i("el-table-column",{attrs:{prop:"fanqiedouxiaoroi",label:"番茄抖小ROI",width:"120",sortable:!0}}),i("el-table-column",{attrs:{prop:"fanqiedouxiaomargin",label:"番茄抖小盈亏",width:"120",sortable:!0}}),2!=e.user.roleId?i("el-table-column",{attrs:{prop:"fanqiedouxiaoprofit",label:"番茄抖小毛利",width:"120",sortable:!0}}):e._e(),i("el-table-column",{attrs:{prop:"fanqieweixiaoexpend",label:"番茄微小消耗",width:"120",sortable:!0}}),i("el-table-column",{attrs:{prop:"fanqieweixiaorecharge",label:"番茄微小充值",width:"120",sortable:!0}}),i("el-table-column",{attrs:{prop:"fanqieweixiaoroi",label:"番茄微小ROI",width:"120",sortable:!0}}),i("el-table-column",{attrs:{prop:"fanqieweixiaomargin",label:"番茄微小盈亏",width:"120",sortable:!0}}),2!=e.user.roleId?i("el-table-column",{attrs:{prop:"fanqieweixiaoprofit",label:"番茄微小毛利",width:"120",sortable:!0}}):e._e(),i("el-table-column",{attrs:{prop:"fanqiemianfeiexpend",label:"番茄免费消耗",width:"120",sortable:!0}}),i("el-table-column",{attrs:{prop:"fanqiemianfeirecharge",label:"番茄免费充值",width:"120",sortable:!0}}),i("el-table-column",{attrs:{prop:"fanqiemianfeiroi",label:"番茄免费ROI",width:"120",sortable:!0}}),i("el-table-column",{attrs:{prop:"fanqiemianfeimargin",label:"番茄免费盈亏",width:"120",sortable:!0}}),2!=e.user.roleId?i("el-table-column",{attrs:{prop:"fanqiemianfeiprofit",label:"番茄免费毛利",width:"120",sortable:!0}}):e._e(),i("el-table-column",{attrs:{prop:"dianzhongexpend",label:"点众消耗",width:"100",sortable:!0}}),i("el-table-column",{attrs:{prop:"dianzhongrecharge",label:"点众充值",width:"100",sortable:!0}}),i("el-table-column",{attrs:{prop:"dianzhongroi",label:"点众ROI",width:"100",sortable:!0}}),i("el-table-column",{attrs:{prop:"dianzhongmargin",label:"点众盈亏",width:"100",sortable:!0}}),2!=e.user.roleId?i("el-table-column",{attrs:{prop:"dianzhongprofit",label:"点众毛利",width:"100",sortable:!0}}):e._e(),i("el-table-column",{attrs:{prop:"meiguangexpend",label:"美光消耗",width:"100",sortable:!0}}),i("el-table-column",{attrs:{prop:"meiguangrecharge",label:"美光充值",width:"100",sortable:!0}}),i("el-table-column",{attrs:{prop:"meiguangroi",label:"美光ROI",width:"100",sortable:!0}}),i("el-table-column",{attrs:{prop:"meiguangmargin",label:"美光盈亏",width:"100",sortable:!0}}),2!=e.user.roleId?i("el-table-column",{attrs:{prop:"meiguangprofit",label:"美光毛利",width:"100",sortable:!0}}):e._e(),i("el-table-column",{attrs:{prop:"chumoexpend",label:"触摸消耗",width:"100",sortable:!0}}),i("el-table-column",{attrs:{prop:"chumorecharge",label:"触摸充值",width:"100",sortable:!0}}),i("el-table-column",{attrs:{prop:"chumoroi",label:"触摸ROI",width:"100",sortable:!0}}),i("el-table-column",{attrs:{prop:"chumomargin",label:"触摸盈亏",width:"100",sortable:!0}}),2!=e.user.roleId?i("el-table-column",{attrs:{prop:"chumoprofit",label:"触摸毛利",width:"100",sortable:!0}}):e._e(),2!=e.user.roleId?i("el-table-column",{attrs:{prop:"zongexpend",label:"总消耗",width:"90",sortable:!0}}):e._e(),i("el-table-column",{attrs:{prop:"zongroi",label:"总ROI",width:"90",sortable:!0}}),i("el-table-column",{attrs:{prop:"zongmargin",label:"总盈亏",width:"90",sortable:!0}}),2!=e.user.roleId?i("el-table-column",{attrs:{prop:"zongprofit",label:"总毛利",width:"90",sortable:!0}}):e._e(),i("el-table-column",{attrs:{prop:"time",label:"记录时间",width:"150"}}),i("el-table-column",{attrs:{prop:"operate",label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"small",type:"success"},on:{click:function(i){return e.mod(t.row)}}},[e._v("编辑")]),i("el-popconfirm",{staticStyle:{"margin-left":"5px"},attrs:{title:"确定删除吗？"},on:{confirm:function(i){return e.del(t.row.id)}}},[i("el-button",{attrs:{slot:"reference",size:"small",type:"danger"},slot:"reference"},[e._v("删除")])],1)]}}])})],1),i("el-pagination",{attrs:{"current-page":e.pageNum,"page-sizes":[10,20,50,1e3],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),i("el-dialog",{attrs:{title:"提示",visible:e.centerDialogVisible,width:"31%",center:""},on:{"update:visible":function(i){e.centerDialogVisible=i}}},[i("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"140px"}},[i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"日期",prop:"date"}},[i("el-date-picker",{staticStyle:{width:"180px"},attrs:{type:"date","value-format":"yyyy-MM-dd"},model:{value:e.form.date,callback:function(i){e.$set(e.form,"date",i)},expression:"form.date"}})],1)],1),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"番茄抖小消耗",prop:"fanqiedouxiaoexpend"}},[i("el-input-number",{attrs:{precision:2,step:.01,min:0},model:{value:e.form.fanqiedouxiaoexpend,callback:function(i){e.$set(e.form,"fanqiedouxiaoexpend",i)},expression:"form.fanqiedouxiaoexpend"}}),i("el-button",{staticStyle:{"margin-left":"2px"},attrs:{size:"small",type:"primary"},on:{click:function(i){return e.calculateExpend("抖音")}}},[e._v("计算")])],1)],1),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"番茄抖小充值",prop:"fanqiedouxiaorecharge"}},[i("el-input-number",{attrs:{precision:2,step:.01,min:0},model:{value:e.form.fanqiedouxiaorecharge,callback:function(i){e.$set(e.form,"fanqiedouxiaorecharge",i)},expression:"form.fanqiedouxiaorecharge"}}),i("el-button",{staticStyle:{"margin-left":"2px"},attrs:{size:"small",type:"primary"},on:{click:function(i){return e.calculate("抖音")}}},[e._v("计算")])],1)],1),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"番茄微小消耗",prop:"fanqieweixiaoexpend"}},[i("el-input-number",{attrs:{precision:2,step:.01,min:0},model:{value:e.form.fanqieweixiaoexpend,callback:function(i){e.$set(e.form,"fanqieweixiaoexpend",i)},expression:"form.fanqieweixiaoexpend"}}),i("el-button",{staticStyle:{"margin-left":"2px"},attrs:{size:"small",type:"primary"},on:{click:function(i){return e.calculateExpend("微信")}}},[e._v("计算")])],1)],1),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"番茄微小充值",prop:"fanqieweixiaorecharge"}},[i("el-input-number",{attrs:{precision:2,step:.01,min:0},model:{value:e.form.fanqieweixiaorecharge,callback:function(i){e.$set(e.form,"fanqieweixiaorecharge",i)},expression:"form.fanqieweixiaorecharge"}}),i("el-button",{staticStyle:{"margin-left":"2px"},attrs:{size:"small",type:"primary"},on:{click:function(i){return e.calculate("微信")}}},[e._v("计算")])],1)],1),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"番茄免费消耗",prop:"fanqiemianfeiexpend"}},[i("el-input-number",{attrs:{precision:2,step:.01,min:0},model:{value:e.form.fanqiemianfeiexpend,callback:function(i){e.$set(e.form,"fanqiemianfeiexpend",i)},expression:"form.fanqiemianfeiexpend"}}),i("el-button",{staticStyle:{"margin-left":"2px"},attrs:{size:"small",type:"primary"},on:{click:function(i){return e.calculateExpend("免费")}}},[e._v("计算")])],1)],1),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"番茄免费充值",prop:"fanqiemianfeirecharge"}},[i("el-input-number",{attrs:{precision:2,step:.01,min:0},model:{value:e.form.fanqiemianfeirecharge,callback:function(i){e.$set(e.form,"fanqiemianfeirecharge",i)},expression:"form.fanqiemianfeirecharge"}})],1)],1),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"点众消耗",prop:"dianzhongexpend"}},[i("el-input-number",{attrs:{precision:2,step:.01,min:0},model:{value:e.form.dianzhongexpend,callback:function(i){e.$set(e.form,"dianzhongexpend",i)},expression:"form.dianzhongexpend"}})],1)],1),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"点众充值",prop:"dianzhongrecharge"}},[i("el-input-number",{attrs:{precision:2,step:.01,min:0},model:{value:e.form.dianzhongrecharge,callback:function(i){e.$set(e.form,"dianzhongrecharge",i)},expression:"form.dianzhongrecharge"}})],1)],1),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"美光消耗",prop:"meiguangexpend"}},[i("el-input-number",{attrs:{precision:2,step:.01,min:0},model:{value:e.form.meiguangexpend,callback:function(i){e.$set(e.form,"meiguangexpend",i)},expression:"form.meiguangexpend"}})],1)],1),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"美光充值",prop:"meiguangrecharge"}},[i("el-input-number",{attrs:{precision:2,step:.01,min:0},model:{value:e.form.meiguangrecharge,callback:function(i){e.$set(e.form,"meiguangrecharge",i)},expression:"form.meiguangrecharge"}})],1)],1),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"触摸消耗",prop:"chumoexpend"}},[i("el-input-number",{attrs:{precision:2,step:.01,min:0},model:{value:e.form.chumoexpend,callback:function(i){e.$set(e.form,"chumoexpend",i)},expression:"form.chumoexpend"}})],1)],1),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"触摸充值",prop:"chumorecharge"}},[i("el-input-number",{attrs:{precision:2,step:.01,min:0},model:{value:e.form.chumorecharge,callback:function(i){e.$set(e.form,"chumorecharge",i)},expression:"form.chumorecharge"}})],1)],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(i){e.centerDialogVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("确 定")])],1)],1),i("el-dialog",{attrs:{title:"提问",visible:e.aiAskDialogVisible,width:"40%",center:"","close-on-click-modal":!1},on:{"update:visible":function(i){e.aiAskDialogVisible=i}}},[i("el-form",{ref:"formAiAskRef",attrs:{rules:e.rules,model:e.formAiAsk,"label-width":"140px"}},[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"请输入问题:",prop:"ask"}},[i("el-input",{staticStyle:{width:"700px"},attrs:{precision:2},model:{value:e.formAiAsk.ask,callback:function(i){e.$set(e.formAiAsk,"ask",i)},expression:"formAiAsk.ask"}})],1)],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(i){e.aiAskDialogVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.ask}},[e._v("确 定")])],1)],1),i("el-dialog",{staticStyle:{"max-height":"100%"},attrs:{title:e.question,visible:e.aiAnswerDialogVisible,width:"40%",center:"","close-on-click-modal":!1},on:{"update:visible":function(i){e.aiAnswerDialogVisible=i},close:function(i){return e.aiAnswerClose()}}},[i("div",{staticStyle:{"white-space":"pre-wrap"}},[e._v(e._s(e.aiAnswer))]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(i){e.aiAnswerDialogVisible=!1}}},[e._v("退出提问")]),i("el-button",{attrs:{type:"primary"},on:{click:function(i){return e.aiAnalyze("other")}}},[e._v("继续提问")])],1)])],1)},r=[],o={name:"ShouzhiManage",data(){return{user:JSON.parse(sessionStorage.getItem("CurUser")),question:"问题",formAiAsk:{ask:""},aiAskDialogVisible:!1,aiAnswerDialogVisible:!1,aiAnswer:"",tableData:[],pageSize:10,pageNum:1,total:0,name:"",centerDialogVisible:!1,form:{id:"",date:"",fanqiedouxiaoexpend:0,dianzhongexpend:0,fanqieweixiaoexpend:0,fanqiedouxiaorecharge:0,fanqiemianfeiexpend:0,dianzhongrecharge:0,fanqieweixiaorecharge:0,fanqiemianfeirecharge:0,fanqiedouxiaoroi:0,dianzhongroi:0,fanqieweixiaoroi:0,fanqiemianfeiroi:0,fanqiedouxiaoprofit:0,dianzhongprofit:0,fanqieweixiaoprofit:0,fanqiemianfeiprofit:0,zongexpend:0,zongroi:0,zongprofit:0,fanqiedouxiaomargin:0,dianzhongmargin:0,fanqieweixiaomargin:0,fanqiemianfeimargin:0,meiguangexpend:0,meiguangrecharge:0,meiguangroi:0,meiguangmargin:0,meiguangprofit:0,chumoexpend:0,chumorecharge:0,chumoroi:0,chumomargin:0,chumoprofit:0,zongmargin:0,time:"",creater:""},form1:{date1:"",date2:"",hiredate1:"",hiredate2:"",location:"",content:"",creater:[JSON.parse(sessionStorage.getItem("CurUser")).name],role:[]},rules:{date:[{required:!0,trigger:"blur"}]},locations:[{value:"1903",label:"1903"},{value:"907",label:"907"}],contents:[{value:"番茄",label:"番茄"},{value:"点众",label:"点众"},{value:"小说",label:"小说"},{value:"腾讯",label:"腾讯"},{value:"iaa",label:"iaa"}],users:[],roles:[],modRow:{}}},methods:{getInputInfo(){this.$axios.get(this.$httpUrl+"/user/inputInfo").then(e=>e.data).then(e=>{200==e.code?(this.users=e.data.user,this.roles=e.data.role):this.$message({message:"操作失败！",type:"error"})})},aiAnswerClose(){},ask(){this.question="问题: "+this.formAiAsk.ask;const e={date1:this.form1.date1,date2:this.form1.date2,location:this.form1.location,content:this.form1.content,hiredate1:this.form1.hiredate1,hiredate2:this.form1.hiredate2,creater:this.form1.creater,asker:this.user.name,type:"first",ask:this.formAiAsk.ask,tableName:"shouzhi",role:this.form1.role},i=this.$loading({lock:!0,text:"AI正在思考，清稍等！",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.$axios.post(this.$httpUrl+"/deepseek/ask",e).then(e=>e.data).then(e=>{200==e.code?(this.aiAskDialogVisible=!1,this.aiAnswerDialogVisible=!0,this.aiAnswer=e.data,i.close()):this.$message({message:"操作失败！",type:"error"})})},aiAnalyze(e){this.formAiAsk.ask="",this.aiAnswerDialogVisible=!1,this.aiAnswer="",this.aiAskDialogVisible=!0,"first"==e&&this.$axios.post(this.$httpUrl+"/deepseek/clearAsk",{asker:this.user.name,tableName:"shouzhi"})},getSummaries(e){const{columns:i,data:t}=e,a=[];var r=0,o=0,n=0,s=0,l=0,h=0,m=0,f=0,d=0,c=0,p=0,u=0,g=0,x=0,b=0,w=0,q=0,y=0,k=0,v=0,z=0,$=0,_=0,S=0,I=0,A=0;for(var D of t)r+=D.fanqiedouxiaoexpend,o+=D.fanqiedouxiaorecharge,n+=D.fanqiedouxiaomargin,s+=D.fanqiedouxiaoprofit,l+=D.fanqieweixiaoexpend,h+=D.fanqieweixiaorecharge,m+=D.fanqieweixiaomargin,f+=D.fanqieweixiaoprofit,d+=D.fanqiemianfeiexpend,c+=D.fanqiemianfeirecharge,p+=D.fanqiemianfeimargin,u+=D.fanqiemianfeiprofit,g+=D.dianzhongexpend,x+=D.dianzhongrecharge,b+=D.dianzhongmargin,w+=D.dianzhongprofit,q+=D.meiguangexpend,y+=D.meiguangrecharge,k+=D.meiguangmargin,v+=D.meiguangprofit,z+=D.chumoexpend,$+=D.chumorecharge,_+=D.chumomargin,S+=D.chumoprofit,I+=D.zongmargin,A+=D.zongprofit;return i.forEach((e,i)=>{2==this.user.roleId?0===i?a[i]="合计":3===i?a[i]=this.fixed2(r):4===i?a[i]=this.fixed2(o):5===i?a[i]=this.fixed(o/r*1.045):6===i?a[i]=this.fixed2(n):7===i?a[i]=this.fixed2(l):8===i?a[i]=this.fixed2(h):9===i?a[i]=this.fixed(h/l*1.045):10===i?a[i]=this.fixed2(m):11===i?a[i]=this.fixed2(d):12===i?a[i]=this.fixed2(c):13===i?a[i]=this.fixed(c/d*1.045):14===i?a[i]=this.fixed2(p):15===i?a[i]=this.fixed2(g):16===i?a[i]=this.fixed2(x):17===i?a[i]=this.fixed(x/g*1.045):18===i?a[i]=this.fixed2(b):19===i?a[i]=this.fixed2(q):20===i?a[i]=this.fixed2(y):21===i?a[i]=this.fixed(y/q*1.045):22===i?a[i]=this.fixed2(k):23===i?a[i]=this.fixed2(z):24===i?a[i]=this.fixed2($):25===i?a[i]=this.fixed($/z*1.045):26===i?a[i]=this.fixed2(_):27===i?a[i]=this.fixed((o+h+x+c+y+$)/(r+l+g+d+q+z)*1.045):28===i&&(a[i]=this.fixed2(I)):0===i?a[i]="合计":7===i?a[i]=this.fixed2(r):8===i?a[i]=this.fixed2(o):9===i?a[i]=this.fixed(o/r*1.045):10===i?a[i]=this.fixed2(n):11===i?a[i]=this.fixed2(s):12===i?a[i]=this.fixed2(l):13===i?a[i]=this.fixed2(h):14===i?a[i]=this.fixed(h/l*1.045):15===i?a[i]=this.fixed2(m):16===i?a[i]=this.fixed2(f):17===i?a[i]=this.fixed2(d):18===i?a[i]=this.fixed2(c):19===i?a[i]=this.fixed(c/d*1.045):20===i?a[i]=this.fixed2(p):21===i?a[i]=this.fixed2(u):22===i?a[i]=this.fixed2(g):23===i?a[i]=this.fixed2(x):24===i?a[i]=this.fixed(x/g*1.045):25===i?a[i]=this.fixed2(b):26===i?a[i]=this.fixed2(w):27===i?a[i]=this.fixed2(q):28===i?a[i]=this.fixed2(y):29===i?a[i]=this.fixed(y/q*1.045):30===i?a[i]=this.fixed2(k):31===i?a[i]=this.fixed2(v):32===i?a[i]=this.fixed2(z):33===i?a[i]=this.fixed2($):34===i?a[i]=this.fixed($/z*1.045):35===i?a[i]=this.fixed2(_):36===i?a[i]=this.fixed2(S):37===i?a[i]=this.fixed2(r+l+g+d+y+$):38===i?a[i]=this.fixed((o+h+x+c+y+$)/(r+l+g+d+q+z)*1.045):39===i?a[i]=this.fixed2(I):40===i&&(a[i]=this.fixed2(A))}),a},fixed(e){return Number(e).toFixed(4)},fixed2(e){return Number(e).toFixed(2)},cell_style({columnIndex:e}){return 2==this.user.roleId?3==e||4==e||5==e||6==e?"background:rgb(253,217,176);":7==e||8==e||9==e||10==e?"background:rgb(207,200,221);":11==e||12==e||13==e||14==e?"background:rgb(239,247,184);":15==e||16==e||17==e||18==e?"background:rgb(239,147,18);":19==e||20==e||21==e||22==e?"background:rgb(253,217,176);":23==e||24==e||25==e||26==e?"background:rgb(239,147,18);":27==e||28==e?"background:rgb(207,200,221);":"background:#f2f5fc;":7==e||8==e||9==e||10==e||11==e?"background:rgb(253,217,176);":12==e||13==e||14==e||15==e||16==e?"background:rgb(207,200,221);":17==e||18==e||19==e||20==e||21==e?"background:rgb(239,247,184);":22==e||23==e||24==e||25==e||26==e?"background:rgb(239,147,18);":27==e||28==e||29==e||30==e||31==e?"background:rgb(253,217,176);":32==e||33==e||34==e||35==e||36==e?"background:rgb(207,200,221);":37==e||38==e||39==e||40==e?"background:rgb(219,187,164);":"background:#f2f5fc;"},resetForm(){this.$refs.form.resetFields(),this.form.id=""},del(e){this.$axios.get(this.$httpUrl+"/shouzhi/del?id="+e).then(e=>e.data).then(e=>{200==e.code?(this.$message({message:"操作成功！",type:"success"}),this.loadPost()):this.$message({message:"操作失败！",type:"error"})})},mod(e){this.centerDialogVisible=!0,this.$nextTick(()=>{this.form.id=e.id,this.form.date=e.date,this.form.fanqiedouxiaoexpend=e.fanqiedouxiaoexpend,this.form.fanqieweixiaoexpend=e.fanqieweixiaoexpend,this.form.fanqiemianfeiexpend=e.fanqiemianfeiexpend,this.form.fanqiedouxiaorecharge=e.fanqiedouxiaorecharge,this.form.dianzhongexpend=e.dianzhongexpend,this.form.dianzhongrecharge=e.dianzhongrecharge,this.form.meiguangexpend=e.meiguangexpend,this.form.meiguangrecharge=e.meiguangrecharge,this.form.chumoexpend=e.chumoexpend,this.form.chumorecharge=e.chumorecharge,this.form.fanqieweixiaorecharge=e.fanqieweixiaorecharge,this.form.fanqiemianfeirecharge=e.fanqiemianfeirecharge,this.form.creater=e.creater}),this.modRow=e},add(){this.centerDialogVisible=!0,this.$nextTick(()=>{this.resetForm()})},dealRoi(e){let i=0,t=0;new Date(e).getTime()>new Date("2024-07-01").getTime()?(i=.83,t=.89):(i=.89,t=.94);let a=0,r=0;new Date(e).getTime()>new Date("2024-10-01").getTime()?(a=.85,r=.89):(a=.89,r=.94),this.form.fanqiedouxiaoexpend?(this.form.fanqiedouxiaoroi=this.fixed(this.form.fanqiedouxiaorecharge/this.form.fanqiedouxiaoexpend*1.045),this.form.fanqiedouxiaomargin=this.fixed2(this.form.fanqiedouxiaorecharge*i-this.form.fanqiedouxiaoexpend/1.045),this.form.fanqiedouxiaoprofit=this.fixed2(this.form.fanqiedouxiaorecharge*t-this.form.fanqiedouxiaoexpend/1.025)):(this.form.fanqiedouxiaoroi=0,this.form.fanqiedouxiaomargin=0,this.form.fanqiedouxiaoprofit=0),this.form.dianzhongexpend?(this.form.dianzhongroi=this.fixed(this.form.dianzhongrecharge/this.form.dianzhongexpend*1.045),this.form.dianzhongmargin=this.fixed2(.8*this.form.dianzhongrecharge-this.form.dianzhongexpend/1.045),this.form.dianzhongprofit=this.fixed2(.85*this.form.dianzhongrecharge-this.form.dianzhongexpend/1.025)):(this.form.dianzhongroi=0,this.form.dianzhongmargin=0,this.form.dianzhongprofit=0),this.form.fanqieweixiaoexpend?(this.form.fanqieweixiaoroi=this.fixed(this.form.fanqieweixiaorecharge/this.form.fanqieweixiaoexpend*1.045),this.form.fanqieweixiaomargin=this.fixed2(.8*this.form.fanqieweixiaorecharge-this.form.fanqieweixiaoexpend/1.045),this.form.fanqieweixiaoprofit=this.fixed2(.85*this.form.fanqieweixiaorecharge-this.form.fanqieweixiaoexpend/1.025)):(this.form.fanqieweixiaoroi=0,this.form.fanqieweixiaomargin=0,this.form.fanqieweixiaoprofit=0),this.form.fanqiemianfeiexpend?(this.form.fanqiemianfeiroi=this.fixed(this.form.fanqiemianfeirecharge/this.form.fanqiemianfeiexpend*1.025),this.form.fanqiemianfeimargin=this.fixed2(this.form.fanqiemianfeirecharge/.7*a-this.form.fanqiemianfeiexpend/1.025),this.form.fanqiemianfeiprofit=this.fixed2(this.form.fanqiemianfeirecharge/.7*r-this.form.fanqiemianfeiexpend/1.025)):(this.form.fanqiemianfeiroi=0,this.form.fanqiemianfeimargin=0,this.form.fanqiemianfeiprofit=0),this.form.meiguangexpend?(this.form.meiguangroi=this.fixed(this.form.meiguangrecharge/this.form.meiguangexpend*1.045),this.form.meiguangmargin=this.fixed2(.8*this.form.meiguangrecharge-this.form.meiguangexpend/1.045),this.form.meiguangprofit=this.fixed2(.85*this.form.meiguangrecharge-this.form.meiguangexpend/1.025)):(this.form.meiguangroi=0,this.form.meiguangmargin=0,this.form.meiguangprofit=0),this.form.chumoexpend?(this.form.chumoroi=this.fixed(this.form.chumorecharge/this.form.chumoexpend*1.045),this.form.chumomargin=this.fixed2(.8*this.form.chumorecharge-this.form.chumoexpend/1.045),this.form.chumoprofit=this.fixed2(.85*this.form.chumorecharge-this.form.chumoexpend/1.025)):(this.form.chumoroi=0,this.form.chumomargin=0,this.form.chumoprofit=0),this.form.fanqiedouxiaoexpend+this.form.fanqieweixiaoexpend+this.form.dianzhongexpend+this.form.fanqiemianfeiexpend+this.form.meiguangexpend+this.form.chumoexpend!=0?(this.form.zongroi=this.fixed((this.form.fanqiedouxiaorecharge+this.form.fanqieweixiaorecharge+this.form.dianzhongrecharge+ +this.form.fanqiemianfeirecharge+this.form.meiguangrecharge+this.form.chumorecharge)/(this.form.fanqiedouxiaoexpend+this.form.fanqieweixiaoexpend+this.form.dianzhongexpend+this.form.fanqiemianfeiexpend+this.form.meiguangexpend+this.form.chumoexpend)*1.045),this.form.zongmargin=this.fixed2(this.form.fanqiedouxiaorecharge*i+.8*this.form.fanqieweixiaorecharge+.8*this.form.dianzhongrecharge+this.form.fanqiemianfeirecharge/.7*a+.8*this.form.meiguangrecharge+.8*this.form.chumorecharge-(this.form.fanqiedouxiaoexpend+this.form.fanqieweixiaoexpend+this.form.dianzhongexpend+this.form.fanqiemianfeiexpend+this.form.meiguangexpend+this.form.chumoexpend)/1.045),this.form.zongprofit=this.fixed2(this.form.fanqiedouxiaorecharge*t+.85*this.form.fanqieweixiaorecharge+.85*this.form.dianzhongrecharge+this.form.fanqiemianfeirecharge/.7*r+.85*this.form.meiguangrecharge+.85*this.form.chumorecharge-(this.form.fanqiedouxiaoexpend+this.form.fanqieweixiaoexpend+this.form.dianzhongexpend+this.form.fanqiemianfeiexpend+this.form.meiguangexpend+this.form.chumoexpend)/1.025)):(this.form.zongroi=0,this.form.zongmargin=0,this.form.zongprofit=0),this.form.zongexpend=this.form.fanqiedouxiaoexpend+this.form.fanqieweixiaoexpend+this.form.dianzhongexpend+this.form.fanqiemianfeiexpend+this.form.meiguangexpend+this.form.chumoexpend},doSave(){this.form.time=this.currentDate(),this.form.creater=this.user.name,this.$axios.post(this.$httpUrl+"/shouzhi/checkrecord",this.form).then(e=>e.data).then(e=>{0==e.data.length?(this.dealRoi(this.form.date),this.$axios.post(this.$httpUrl+"/shouzhi/save",this.form).then(e=>e.data).then(e=>{200==e.code?(this.$message({message:"操作成功！",type:"success"}),this.centerDialogVisible=!1,this.loadPost(),this.resetForm()):this.$message({message:"操作失败！",type:"error"})})):this.$message({message:this.form.date+"已录入数据！",type:"error"})})},exportExcel(){this.form.time=this.currentDate(),this.form.creater=this.user.name,this.$confirm("确定导出？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$axios.request({url:this.$httpUrl+"/shouzhi/export",method:"post",data:{date1:this.form1.date1,date2:this.form1.date2,location:this.form1.location,content:this.form1.content,hiredate1:this.form1.hiredate1,hiredate2:this.form1.hiredate2,creater:this.form1.creater,role:this.form1.role},responseType:"blob"}).then(e=>{const i=window.URL.createObjectURL(new Blob([e.data])),t=document.createElement("a");t.href=i,t.setAttribute("download","投放记录"+(new Date).getTime()+".xlsx"),document.body.appendChild(t),t.click(),window.URL.revokeObjectURL(URL)}).catch(()=>{this.$message({message:"下载失败！",type:"error"})})})},currentDate(){var e=new Date,i=e.getFullYear(),t=e.getMonth();t=t+1>12?1:t+1,t=t>9?t:"0"+t.toString();var a=e.getDate(),r=e.getHours();r=r>9?r:"0"+r.toString();var o=e.getMinutes();o=o>9?o:"0"+o.toString();var n=e.getSeconds();return n=n>9?n:"0"+n.toString(),`${i}-${t}-${a} ${r}:${o}:${n}`},doMod(){this.form.time=this.currentDate(),this.dealRoi(this.modRow.date),this.form.creater=this.modRow.creater,this.$axios.post(this.$httpUrl+"/shouzhi/update",this.form).then(e=>e.data).then(e=>{200==e.code?(this.$message({message:"操作成功！",type:"success"}),this.centerDialogVisible=!1,this.loadPost(),this.resetForm()):this.$message({message:"操作失败！",type:"error"})})},save(){this.$refs.form.validate(e=>{if(!e)return!1;this.form.id?this.doMod():this.doSave()})},handleSizeChange(e){this.pageNum=1,this.pageSize=e,this.loadPost()},handleCurrentChange(e){this.pageNum=e,this.loadPost()},resetParam(){this.form1.date1="",this.form1.date2="",this.form1.location="",this.form1.content="",this.form1.hiredate1="",this.form1.hiredate2="",2!=this.user.roleId?this.form1.creater=[]:this.form1.creater=[this.user.name]},loadPost(){this.$axios.post(this.$httpUrl+"/shouzhi/listPage",{pageSize:this.pageSize,pageNum:this.pageNum,param:{date1:this.form1.date1,date2:this.form1.date2,location:this.form1.location,content:this.form1.content,hiredate1:this.form1.hiredate1,hiredate2:this.form1.hiredate2,creater:this.form1.creater,role:this.form1.role}}).then(e=>e.data).then(e=>{200==e.code?(this.tableData=e.data,this.total=e.total):alert("获取数据失败")})},calculate(e){if(!this.form.date)return void this.$message({message:"先选择日期！",type:"info"});let i=this.form.creater?this.form.creater:this.user.name;this.$axios.post(this.$httpUrl+"/shouzhi/calculateRecharge",{mini_program_name:e,date:this.form.date,user_name:i}).then(i=>{200==i.status&&this.$confirm("计算结果为"+i.data+"，是否使用该值？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{"微信"===e?this.form.fanqieweixiaorecharge=i.data:"抖音"===e?this.form.fanqiedouxiaorecharge=i.data:"免费"===e&&(this.form.fanqiemianfeirecharge=i.data)}).catch(()=>{})})},calculateExpend(e){if(!this.form.date)return void this.$message({message:"先选择日期！",type:"info"});let i=this.form.creater?this.form.creater:this.user.name;this.$axios.post(this.$httpUrl+"/advertiser/calculateExpend",{mini_program_name:e,date:this.form.date,user_name:i}).then(i=>{200==i.status&&this.$confirm("计算结果为"+i.data+"，是否使用该值？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{"微信"===e?this.form.fanqieweixiaoexpend=i.data:"抖音"===e?this.form.fanqiedouxiaoexpend=i.data:"免费"===e&&(this.form.fanqiemianfeiexpend=i.data)}).catch(()=>{})})}},beforeMount(){2!=this.user.roleId?this.form1.creater=[]:this.form1.creater=[JSON.parse(sessionStorage.getItem("CurUser")).name],this.loadPost(),this.getInputInfo()}},n=o,s=t("2877"),l=Object(s["a"])(n,a,r,!1,null,"3077000a",null);i["default"]=l.exports}}]);
//# sourceMappingURL=chunk-2d0c2186.ba2ede42.js.map