(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2100b9"],{b5e5:function(e,t,l){"use strict";l.r(t);var o=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticStyle:{"margin-bottom":"5px"}},[t("el-form",{ref:"form1",attrs:{model:e.form,"label-width":"75px"}},[t("el-col",{attrs:{span:3}},[t("el-form-item",{attrs:{label:"姓名",prop:"location"}},[t("el-input",{staticStyle:{width:"170px"},attrs:{placeholder:"请输入姓名","suffix-icon":"el-icon-search"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.loadPost.apply(null,arguments)}},model:{value:e.form1.name,callback:function(t){e.$set(e.form1,"name",t)},expression:"form1.name"}})],1)],1),t("el-col",{attrs:{span:3}},[t("el-form-item",{attrs:{label:"性别",prop:"location"}},[t("el-select",{staticStyle:{width:"170px"},attrs:{filterable:"",placeholder:"请选择性别"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.loadPost.apply(null,arguments)}},model:{value:e.form1.sex,callback:function(t){e.$set(e.form1,"sex",t)},expression:"form1.sex"}},e._l(e.sexs,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("el-col",{attrs:{span:3}},[t("el-form-item",{attrs:{label:"位置",prop:"location"}},[t("el-input",{staticStyle:{width:"170px"},attrs:{placeholder:"请输入位置",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.loadPost.apply(null,arguments)}},model:{value:e.form1.location,callback:function(t){e.$set(e.form1,"location",t)},expression:"form1.location"}})],1)],1),t("el-col",{attrs:{span:3}},[t("el-form-item",{attrs:{label:"内容",prop:"content"}},[t("el-input",{staticStyle:{width:"170px"},attrs:{placeholder:"请输入内容",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.loadPost.apply(null,arguments)}},model:{value:e.form1.content,callback:function(t){e.$set(e.form1,"content",t)},expression:"form1.content"}})],1)],1)],1),t("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary"},on:{click:e.loadPost}},[e._v("查询")]),t("el-button",{attrs:{type:"success"},on:{click:e.resetParam}},[e._v("重置")]),t("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary"},on:{click:e.add}},[e._v("新增")]),t("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary"},on:{click:e.exportExcel}},[e._v("导出")])],1),t("el-table",{attrs:{data:e.tableData,"header-cell-style":{background:"#f2f5fc",color:"#555555"},border:""}},[t("el-table-column",{attrs:{type:"index",label:"序号",width:"60"}}),t("el-table-column",{attrs:{prop:"no",label:"账号",width:"180"}}),t("el-table-column",{attrs:{prop:"name",label:"姓名",width:"180"}}),t("el-table-column",{attrs:{prop:"password",label:"密码",width:"180"}}),t("el-table-column",{attrs:{prop:"distributor",label:"分销商",width:"150"}}),t("el-table-column",{attrs:{prop:"age",label:"年龄",width:"80"}}),t("el-table-column",{attrs:{prop:"role",label:"员工角色",width:"80"}}),t("el-table-column",{attrs:{prop:"location",label:"位置",width:"80"}}),t("el-table-column",{attrs:{prop:"content",label:"内容",width:"80"}}),t("el-table-column",{attrs:{prop:"hiredate",label:"入职时间",width:"150"}}),t("el-table-column",{attrs:{prop:"sex",label:"性别",width:"80"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-tag",{attrs:{type:1===l.row.sex?"primary":"success","disable-transitions":""}},[e._v(e._s(1===l.row.sex?"男":"女"))])]}}])}),t("el-table-column",{attrs:{prop:"roleId",label:"账号角色",width:"120"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-tag",{attrs:{type:0===l.row.roleId?"danger":1===l.row.roleId?"primary":"success","disable-transitions":""}},[e._v(e._s(0===l.row.roleId?"超级管理员":1===l.row.roleId?"管理员":"用户"))])]}}])}),t("el-table-column",{attrs:{prop:"phone",label:"电话",width:"180"}}),t("el-table-column",{attrs:{prop:"operate",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-button",{attrs:{size:"small",type:"success"},on:{click:function(t){return e.mod(l.row)}}},[e._v("编辑")]),t("el-popconfirm",{staticStyle:{"margin-left":"5px"},attrs:{title:"确定删除吗？"},on:{confirm:function(t){return e.del(l.row.id)}}},[t("el-button",{attrs:{slot:"reference",size:"small",type:"danger"},slot:"reference"},[e._v("删除")])],1)]}}])})],1),t("el-pagination",{attrs:{"current-page":e.pageNum,"page-sizes":[10,20,50,100,1e3],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),t("el-dialog",{attrs:{title:"提示",visible:e.centerDialogVisible,width:"30%",center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[t("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"账号",prop:"no"}},[t("el-col",{attrs:{span:20}},[t("el-input",{model:{value:e.form.no,callback:function(t){e.$set(e.form,"no",t)},expression:"form.no"}})],1)],1),t("el-form-item",{attrs:{label:"名字",prop:"name"}},[t("el-col",{attrs:{span:20}},[t("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),t("el-form-item",{attrs:{label:"密码",prop:"password"}},[t("el-col",{attrs:{span:20}},[t("el-input",{model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1)],1),t("el-form-item",{attrs:{label:"分销商",prop:"distributor"}},[t("el-col",{attrs:{span:20}},[t("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"","collapse-tags":"",placeholder:"请选择"},model:{value:e.form.distributor,callback:function(t){e.$set(e.form,"distributor",t)},expression:"form.distributor"}},e._l(e.distributors,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1),t("el-form-item",{attrs:{label:"角色",prop:"role"}},[t("el-col",{attrs:{span:20}},[t("el-input",{model:{value:e.form.role,callback:function(t){e.$set(e.form,"role",t)},expression:"form.role"}})],1)],1),t("el-form-item",{attrs:{label:"位置",prop:"location"}},[t("el-col",{attrs:{span:20}},[t("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"","collapse-tags":"",placeholder:"请选择"},model:{value:e.form.location,callback:function(t){e.$set(e.form,"location",t)},expression:"form.location"}},e._l(e.locations,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("el-form-item",{attrs:{label:"内容",prop:"content"}},[t("el-col",{attrs:{span:20}},[t("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"","collapse-tags":"",placeholder:"请选择"},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}},e._l(e.contents,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("el-form-item",{attrs:{label:"入职时间",prop:"hiredate"}},[t("el-col",{attrs:{span:20}},[t("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date","value-format":"yyyy-MM-dd"},model:{value:e.form.hiredate,callback:function(t){e.$set(e.form,"hiredate",t)},expression:"form.hiredate"}})],1)],1),t("el-form-item",{attrs:{label:"性别"}},[t("el-radio-group",{model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},[t("el-radio",{attrs:{label:"1"}},[e._v("男")]),t("el-radio",{attrs:{label:"0"}},[e._v("女")])],1)],1),t("el-form-item",{attrs:{label:"年龄",prop:"age"}},[t("el-col",{attrs:{span:20}},[t("el-input",{model:{value:e.form.age,callback:function(t){e.$set(e.form,"age",t)},expression:"form.age"}})],1)],1),t("el-form-item",{attrs:{label:"电话",prop:"phone"}},[t("el-col",{attrs:{span:20}},[t("el-input",{model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1)],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.centerDialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("确 定")])],1)],1)],1)},a=[],r=(l("d9e2"),{name:"UserManage",data(){let e=(e,t,l)=>{if(this.form.id)return l();this.$axios.get(this.$httpUrl+"/user/findByNo?no="+this.form.no).then(e=>e.data).then(e=>{200!=e.code?l():l(new Error("账号已经存在"))})};return{tableData:[],pageSize:10,pageNum:1,total:0,locations:[{value:"1903",label:"1903"},{value:"907",label:"907"}],contents:[{value:"番茄",label:"番茄"},{value:"点众",label:"点众"},{value:"小说",label:"小说"},{value:"腾讯",label:"腾讯"},{value:"iaa",label:"iaa"}],distributors:[],sexs:[{value:"1",label:"男"},{value:"0",label:"女"}],centerDialogVisible:!1,form:{id:"",no:"",name:"",password:"",distributor:"",age:"",phone:"",sex:"0",roleId:"2",role:"",location:"",content:"",hiredate:""},form1:{name:"",sex:"",location:"",content:""},rules:{no:[{required:!0,message:"请输入账号",trigger:"blur"},{min:3,max:30,message:"长度在 3 到 30 个字符",trigger:"blur"},{validator:e,trigger:"blur"}],name:[{required:!0,message:"请输入名字",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:3,max:8,message:"长度在 3 到 8 个字符",trigger:"blur"}],phone:[{pattern:/^1[3|4|5|6|7|8|9][0-9]\d{8}$/,message:"请输入正确的手机号码",trigger:"blur"}],distributor:[]}}},methods:{resetForm(){this.$refs.form.resetFields(),this.form.id=""},getDistributorInfo(){this.$axios.get(this.$httpUrl+"/user/distributors").then(e=>e.data).then(e=>{200==e.code?this.distributors=e.data:this.$message({message:"操作失败！",type:"error"})})},del(e){this.$axios.get(this.$httpUrl+"/user/del?id="+e).then(e=>e.data).then(e=>{200==e.code?(this.$message({message:"操作成功！",type:"success"}),this.loadPost()):this.$message({message:"操作失败！",type:"error"})})},mod(e){this.centerDialogVisible=!0,this.$nextTick(()=>{this.form.id=e.id,this.form.no=e.no,this.form.name=e.name,this.form.password=e.password,this.form.sex=e.sex+"",this.form.phone=e.phone,this.form.roleId=e.roleId,this.form.location=e.location,this.form.content=e.content,this.form.hiredate=e.hiredate,this.form.distributor=e.distributor,this.form.role=e.role,e.age?this.form.age=e.age+"":this.form.age="0"})},add(){this.centerDialogVisible=!0,this.$nextTick(()=>{this.resetForm()})},doSave(){this.$axios.post(this.$httpUrl+"/user/save",this.form).then(e=>e.data).then(e=>{200==e.code?(this.$message({message:"操作成功！",type:"success"}),this.centerDialogVisible=!1,this.loadPost(),this.resetForm()):this.$message({message:"操作失败！",type:"error"})})},doMod(){this.$axios.post(this.$httpUrl+"/user/update",this.form).then(e=>e.data).then(e=>{200==e.code?(this.$message({message:"操作成功！",type:"success"}),this.centerDialogVisible=!1,this.loadPost(),this.resetForm()):this.$message({message:"操作失败！",type:"error"})})},save(){this.$refs.form.validate(e=>{if(!e)return!1;this.form.id?this.doMod():this.doSave()})},handleSizeChange(e){this.pageNum=1,this.pageSize=e,this.loadPost()},handleCurrentChange(e){this.pageNum=e,this.loadPost()},loadGet(){this.$axios.get(this.$httpUrl+"/user/list").then(e=>e.data).then(e=>{console.log(e)})},resetParam(){this.form1={name:"",sex:"",location:"",content:""},this.loadPost()},loadPost(){this.$axios.post(this.$httpUrl+"/user/listPageC1",{pageSize:this.pageSize,pageNum:this.pageNum,param:{name:this.form1.name,sex:this.form1.sex,location:this.form1.location,content:this.form1.content,roleId:"2"}}).then(e=>e.data).then(e=>{200==e.code?(this.tableData=e.data,this.total=e.total):alert("获取数据失败")})},exportExcel(){this.$confirm("确定导出？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$axios.request({url:this.$httpUrl+"/user/export",method:"post",data:{name:this.form1.name,sex:this.form1.sex,location:this.form1.location,content:this.form1.content,roleId:"2"},responseType:"blob"}).then(e=>{const t=window.URL.createObjectURL(new Blob([e.data])),l=document.createElement("a");l.href=t,l.setAttribute("download","用户名单"+(new Date).getTime()+".xlsx"),document.body.appendChild(l),l.click(),window.URL.revokeObjectURL(URL)}).catch(()=>{this.$message({message:"下载失败！",type:"error"})})})}},beforeMount(){this.loadPost(),this.getDistributorInfo()}}),s=r,i=l("2877"),n=Object(i["a"])(s,o,a,!1,null,"1b464612",null);t["default"]=n.exports}}]);
//# sourceMappingURL=chunk-2d2100b9.6a58e247.js.map