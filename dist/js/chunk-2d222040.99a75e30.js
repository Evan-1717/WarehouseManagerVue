(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d222040"],{cd8a:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{height:"100%"}},[t("div",{staticStyle:{"margin-bottom":"5px"}},[t("el-form",{ref:"form1",attrs:{model:e.form,"label-width":"75px"}},[t("el-col",{attrs:{span:4}},[t("el-form-item",{attrs:{label:"起止日期",prop:"creater"}},[t("el-date-picker",{staticStyle:{width:"140px"},attrs:{type:"date",placeholder:"起始时间","value-format":"yyyy-MM-dd"},model:{value:e.form1.date1,callback:function(t){e.$set(e.form1,"date1",t)},expression:"form1.date1"}}),e._v("- "),t("el-date-picker",{staticStyle:{width:"140px"},attrs:{type:"date",placeholder:"结束时间","value-format":"yyyy-MM-dd"},model:{value:e.form1.date2,callback:function(t){e.$set(e.form1,"date2",t)},expression:"form1.date2"}})],1)],1),t("el-col",{attrs:{span:3}},[t("el-form-item",{attrs:{label:"投放ID",prop:"content"}},[t("el-input",{staticStyle:{width:"170px"},attrs:{placeholder:"请输入",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.loadPost.apply(null,arguments)}},model:{value:e.form1.promotion_id,callback:function(t){e.$set(e.form1,"promotion_id",t)},expression:"form1.promotion_id"}})],1)],1),t("el-col",{attrs:{span:3}},[t("el-form-item",{attrs:{label:"投放名称",prop:"location"}},[t("el-input",{staticStyle:{width:"170px"},attrs:{placeholder:"请输入",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.loadPost.apply(null,arguments)}},model:{value:e.form1.promotion_name,callback:function(t){e.$set(e.form1,"promotion_name",t)},expression:"form1.promotion_name"}})],1)],1),t("el-col",{attrs:{span:3}},[t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2!=e.user.roleId,expression:"user.roleId!=2"}],attrs:{label:"投放人",prop:"creater"}},[t("el-input",{staticStyle:{width:"170px"},attrs:{placeholder:"请输入投放人名",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.loadPost.apply(null,arguments)}},model:{value:e.form1.creater,callback:function(t){e.$set(e.form1,"creater",t)},expression:"form1.creater"}})],1)],1)],1),t("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary"},on:{click:e.loadPost}},[e._v("查询")]),t("el-button",{attrs:{type:"success"},on:{click:e.resetParam}},[e._v("重置")]),t("el-button",{directives:[{name:"show",rawName:"v-show",value:2!=e.user.roleId,expression:"user.roleId!=2"}],staticStyle:{"margin-left":"5px"},attrs:{type:"primary"},on:{click:e.exportExcel}},[e._v("导出")])],1),t("el-table",{staticStyle:{overflow:"auto"},attrs:{data:e.tableData,"header-cell-style":e.cell_style,border:"","max-height":"calc(100% - 200px)"}},[t("el-table-column",{attrs:{type:"index",label:"序号",width:"50",fixed:"left"}}),t("el-table-column",{attrs:{prop:"promotion_id",label:"投放ID",width:"150",fixed:"left"}}),t("el-table-column",{attrs:{prop:"promotion_name",label:"投放名称",width:"200",fixed:"left"}}),2!=e.user.roleId?t("el-table-column",{attrs:{prop:"promotion_http_url",label:"投放网络地址",width:"200",fixed:"left"}}):e._e(),2!=e.user.roleId?t("el-table-column",{attrs:{prop:"promotion_url",label:"投放地址",width:"200",fixed:"left"}}):e._e(),t("el-table-column",{attrs:{prop:"distributor_id",label:"分销商ID",width:"150",sortable:!0}}),t("el-table-column",{attrs:{prop:"book_id",label:"短剧ID",width:"120",sortable:!0}}),t("el-table-column",{attrs:{prop:"media_source",label:"媒体类型 ",width:"120",sortable:!0}}),t("el-table-column",{attrs:{prop:"package_name",label:"剧场名",width:"120",sortable:!0}}),t("el-table-column",{attrs:{prop:"creater",label:"投放人",width:"120",sortable:!0}}),t("el-table-column",{attrs:{prop:"create_time",label:"投放时间",width:"150",sortable:!0}}),t("el-table-column",{attrs:{prop:"operate",label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("el-button",{attrs:{size:"small",type:"success"},on:{click:function(t){return e.mod(r.row)}}},[e._v("编辑")]),t("el-popconfirm",{staticStyle:{"margin-left":"5px"},attrs:{title:"确定删除吗？"},on:{confirm:function(t){return e.del(r.row.id)}}},[t("el-button",{attrs:{slot:"reference",size:"small",type:"danger"},slot:"reference"},[e._v("删除")])],1)]}}])})],1),t("el-pagination",{attrs:{"current-page":e.pageNum,"page-sizes":[10,20,50,1e3],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},o=[],l={name:"promotionManage",data(){return{user:JSON.parse(sessionStorage.getItem("CurUser")),tableData:[],pageSize:10,pageNum:1,total:0,name:"",form1:{date1:"",date2:"",promotion_id:"",promotion_name:"",creater:JSON.parse(sessionStorage.getItem("CurUser")).name},rules:{date:[{required:!0,trigger:"blur"}]},modRow:{}}},methods:{fixed(e){return Number(e).toFixed(4)},fixed2(e){return Number(e).toFixed(2)},cell_style({columnIndex:e}){return 2==this.user.roleId?3==e||4==e||5==e||6==e?"background:rgb(253,217,176);":7==e||8==e||9==e||10==e?"background:rgb(207,200,221);":11==e||12==e||13==e||14==e?"background:rgb(239,247,184);":15==e||16==e||17==e||18==e?"background:rgb(239,147,18);":19==e||20==e||21==e||22==e?"background:rgb(253,217,176);":23==e||24==e||25==e||26==e?"background:rgb(239,147,18);":27==e||28==e?"background:rgb(207,200,221);":"background:#f2f5fc;":7==e||8==e||9==e||10==e||11==e?"background:rgb(253,217,176);":12==e||13==e||14==e||15==e||16==e?"background:rgb(207,200,221);":17==e||18==e||19==e||20==e||21==e?"background:rgb(239,247,184);":22==e||23==e||24==e||25==e||26==e?"background:rgb(239,147,18);":27==e||28==e||29==e||30==e||31==e?"background:rgb(253,217,176);":32==e||33==e||34==e||35==e||36==e?"background:rgb(207,200,221);":37==e||38==e||39==e||40==e?"background:rgb(219,187,164);":"background:#f2f5fc;"},resetForm(){this.$refs.form.resetFields(),this.form.id=""},del(e){this.$axios.get(this.$httpUrl+"/shouzhi/del?id="+e).then(e=>e.data).then(e=>{200==e.code?(this.$message({message:"操作成功！",type:"success"}),this.loadPost()):this.$message({message:"操作失败！",type:"error"})})},exportExcel(){this.form.time=this.currentDate(),this.form.creater=this.user.name,this.$confirm("确定导出？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$axios.request({url:this.$httpUrl+"/shouzhi/export",method:"post",data:{date1:this.form1.date1,date2:this.form1.date2,location:this.form1.location,content:this.form1.content,hiredate1:this.form1.hiredate1,hiredate2:this.form1.hiredate2,creater:this.form1.creater},responseType:"blob"}).then(e=>{const t=window.URL.createObjectURL(new Blob([e.data])),r=document.createElement("a");r.href=t,r.setAttribute("download","投放记录"+(new Date).getTime()+".xlsx"),document.body.appendChild(r),r.click(),window.URL.revokeObjectURL(URL)}).catch(()=>{this.$message({message:"下载失败！",type:"error"})})})},currentDate(){var e=new Date,t=e.getFullYear(),r=e.getMonth();r=r+1>12?1:r+1,r=r>9?r:"0"+r.toString();var a=e.getDate(),o=e.getHours();o=o>9?o:"0"+o.toString();var l=e.getMinutes();l=l>9?l:"0"+l.toString();var i=e.getSeconds();return i=i>9?i:"0"+i.toString(),`${t}-${r}-${a} ${o}:${l}:${i}`},handleSizeChange(e){this.pageNum=1,this.pageSize=e,this.loadPost()},handleCurrentChange(e){this.pageNum=e,this.loadPost()},resetParam(){this.form1.date1="",this.form1.date2="",this.form1.promotion_id="",this.form1.promotion_name="",2!=this.user.roleId?this.form1.creater="":this.form1.creater=this.user.name},loadPost(){this.$axios.post(this.$httpUrl+"/promotion/listPage",{pageSize:this.pageSize,pageNum:this.pageNum,param:{date1:this.form1.date1,date2:this.form1.date2,promotion_id:this.form1.promotion_id,promotion_name:this.form1.promotion_name,creater:this.form1.creater}}).then(e=>e.data).then(e=>{200==e.code?(this.tableData=e.data,this.total=e.total):alert("获取数据失败")})},calculate(e){if(!this.form.date)return void this.$message({message:"先选择日期！",type:"info"});let t=this.form.creater?this.form.creater:this.user.name;this.$axios.post(this.$httpUrl+"/shouzhi/calculate",{mini_program_name:e,date:this.form.date,user_name:t}).then(t=>{200==t.status&&this.$confirm("计算结果为"+t.data+"，是否使用该值？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{"微信"===e?this.form.fanqieweixiaorecharge=t.data:"抖音"===e?this.form.fanqiedouxiaorecharge=t.data:"免费"===e&&(this.form.fanqiemianfeirecharge=t.data)}).catch(()=>{})})}},beforeMount(){2!=this.user.roleId?this.form1.creater="":this.form1.creater=JSON.parse(sessionStorage.getItem("CurUser")).name,this.loadPost()}},i=l,s=r("2877"),n=Object(s["a"])(i,a,o,!1,null,"6fb5ad05",null);t["default"]=n.exports}}]);
//# sourceMappingURL=chunk-2d222040.99a75e30.js.map